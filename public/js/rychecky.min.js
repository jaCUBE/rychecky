var filterFns={};var $=jQuery;$(function(){if($(".portfolio").length>0){initialize_isotope()}moment.locale($("html").attr("lang"));if($(".lastfm").length>0){lastfm()}if($("#gmap-iframe").length>0){gmap_resize();$(window).on("resize",gmap_resize)}$(".timeline .event").on("mouseover click",timeline_type_focus);$("*[title]").tooltipster({animation:"grow"})});function portfolio(portfolio_id){var modal=$("#portfolio-modal");$.ajax({type:"GET",url:"/api/portfolio/"+portfolio_id,success:function(response,textStatus,xhr){var data=JSON.parse(response).data;modal.find(".modal-title").html(data.portfolio.name);modal.find(".modal-body").html(data.html);modal.modal("show")},beforeSend:function(){$("body").addClass("waiting")},complete:function(){$("body").removeClass("waiting")}})}function initialize_isotope(){var $container=$(".isotope").isotope({itemSelector:".portfolio",layoutMode:"fitRows",getSortData:{name:"[data-name]",age:function(item){return parseInt($(item).data("age"))},size:function(item){return parseInt($(item).data("size"))}}});$("#filters .btn").on("click",function(){var filterValue=$(this).attr("data-filter");filterValue=filterFns[filterValue]||filterValue;$container.isotope({filter:filterValue})});$("#sorts .btn").on("click",function(){var sortByValue=$(this).attr("data-sort-by");$container.isotope({sortBy:sortByValue})});$("#filters .btn, #sorts .btn").on("click",function(){$(this).addClass("btn-light").removeClass("btn-dark");$(this).siblings(".btn").addClass("btn-dark").removeClass("btn-light")})}function timeline_type_focus(){var type=$(this).data("type");$(".event").css({opacity:.4});$(this).css({opacity:1});$('.event[data-type="'+type+'"]').css({opacity:.9});$(this).on("mouseleave",function(){$(".event").css({opacity:1})})}function gmap_resize(){var container=$("#content");var iframe=$("#gmap-iframe");var width=parseInt(container.css("width"));var css={width:width+"px","margin-left":"-"+container.css("padding-left"),"margin-bottom":"-"+container.css("padding-bottom")};iframe.css(css)}function lastfm(){var html=$(".lastfm");html.on("click",function(){window.location=html.data("url")});$.ajax({type:"GET",url:"http://ws.audioscrobbler.com/2.0/",data:{method:"user.getrecenttracks",user:"jaCUBExCZ",api_key:"50d4c5bbe273d5655dbdfa55c8739b82",format:"json"},success:function(data,textStatus,xhr){html.slideDown();var track=data.recenttracks.track[0];html.data("url",track.url);html.find(".artist").text(track.artist["#text"]);html.find(".track").text(track.name);html.find(".image img").attr("src",track.image[1]["#text"]);var time=moment.unix(track.date.uts);html.find(".time").text(time.fromNow())}})}